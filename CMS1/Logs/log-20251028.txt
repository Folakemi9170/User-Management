2025-10-28 10:37:30.231 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 10:37:31.523 +01:00 [INF] Now listening on: https://localhost:7153
2025-10-28 10:37:31.531 +01:00 [INF] Now listening on: http://localhost:5164
2025-10-28 10:37:32.302 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7153/swagger/index.html - null null
2025-10-28 10:37:32.379 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 10:37:32.383 +01:00 [INF] Hosting environment: Development
2025-10-28 10:37:32.387 +01:00 [INF] Content root path: C:\Users\HP\Desktop\CMS1\CMS1
2025-10-28 10:37:32.761 +01:00 [INF]  ExceptionMiddleware executing for: /swagger/index.html
2025-10-28 10:37:33.014 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7153/swagger/index.html - 200 null text/html;charset=utf-8 731.4497ms
2025-10-28 10:37:33.054 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7153/_vs/browserLink - null null
2025-10-28 10:37:33.055 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7153/_framework/aspnetcore-browser-refresh.js - null null
2025-10-28 10:37:33.115 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7153/_framework/aspnetcore-browser-refresh.js - 200 16513 application/javascript; charset=utf-8 60.9924ms
2025-10-28 10:37:33.201 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7153/_vs/browserLink - 200 null text/javascript; charset=UTF-8 146.3352ms
2025-10-28 10:37:33.260 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7153/swagger/v1/swagger.json - null null
2025-10-28 10:37:33.271 +01:00 [INF]  ExceptionMiddleware executing for: /swagger/v1/swagger.json
2025-10-28 10:37:33.360 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7153/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 100.4421ms
2025-10-28 10:38:00.507 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7153/api/User/login - application/json 61
2025-10-28 10:38:00.578 +01:00 [INF] CORS policy execution successful.
2025-10-28 10:38:00.586 +01:00 [INF]  ExceptionMiddleware executing for: /api/User/login
2025-10-28 10:38:00.934 +01:00 [INF] Executing endpoint 'UserManagement.Presentation.Controllers.UserController.Login (UserManagement)'
2025-10-28 10:38:01.041 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserManagement.Application.DTO.UserRoleDto.UserLoginDto) on controller UserManagement.Presentation.Controllers.UserController (UserManagement).
2025-10-28 10:38:06.153 +01:00 [INF] Executed DbCommand (150ms) [Parameters=[@__loginmodel_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[EmployeeId], [u].[PasswordHash], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginmodel_Email_0
2025-10-28 10:38:07.788 +01:00 [INF] Executed DbCommand (62ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CreatedAt], [s].[DOB], [s].[DepartmentId], [s].[Email], [s].[Firstname], [s].[Gender], [s].[IsActive], [s].[JobTitleId], [s].[Lastname], [s].[Middlename], [s].[Phone], [s].[RoleId], [s].[UpdatedAt], [s].[UserId], [s].[Id0], [s].[CreatedAt0], [s].[Description], [s].[RoleName], [s].[UpdatedAt0], [s].[Id1], [s].[Id2], [s0].[PermissionsId], [s0].[RolesId], [s0].[Id], [s0].[CreatedAt], [s0].[Description], [s0].[ModuleName], [s0].[SubModuleName], [s0].[UpdatedAt], [s].[CreatedAt1], [s].[DepartmentId0], [s].[Description0], [s].[IsActive0], [s].[MaximumSalary], [s].[MinimumSalary], [s].[Name], [s].[RoleId0], [s].[UpdatedAt1], [s].[CreatedAt2], [s].[DeptName], [s].[UpdatedAt2]
FROM (
    SELECT TOP(1) [e].[Id], [e].[CreatedAt], [e].[DOB], [e].[DepartmentId], [e].[Email], [e].[Firstname], [e].[Gender], [e].[IsActive], [e].[JobTitleId], [e].[Lastname], [e].[Middlename], [e].[Phone], [e].[RoleId], [e].[UpdatedAt], [e].[UserId], [r].[Id] AS [Id0], [r].[CreatedAt] AS [CreatedAt0], [r].[Description], [r].[RoleName], [r].[UpdatedAt] AS [UpdatedAt0], [j].[Id] AS [Id1], [j].[CreatedAt] AS [CreatedAt1], [j].[DepartmentId] AS [DepartmentId0], [j].[Description] AS [Description0], [j].[IsActive] AS [IsActive0], [j].[MaximumSalary], [j].[MinimumSalary], [j].[Name], [j].[RoleId] AS [RoleId0], [j].[UpdatedAt] AS [UpdatedAt1], [d].[Id] AS [Id2], [d].[CreatedAt] AS [CreatedAt2], [d].[DeptName], [d].[UpdatedAt] AS [UpdatedAt2]
    FROM [Employees] AS [e]
    INNER JOIN [Roles] AS [r] ON [e].[RoleId] = [r].[Id]
    LEFT JOIN [JobTitles] AS [j] ON [e].[JobTitleId] = [j].[Id]
    INNER JOIN [Departments] AS [d] ON [e].[DepartmentId] = [d].[Id]
    WHERE [e].[UserId] = @__user_Id_0
) AS [s]
LEFT JOIN (
    SELECT [p].[PermissionsId], [p].[RolesId], [p0].[Id], [p0].[CreatedAt], [p0].[Description], [p0].[ModuleName], [p0].[SubModuleName], [p0].[UpdatedAt]
    FROM [PermissionRoles] AS [p]
    INNER JOIN [Permissions] AS [p0] ON [p].[PermissionsId] = [p0].[Id]
) AS [s0] ON [s].[Id0] = [s0].[RolesId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [s0].[PermissionsId], [s0].[RolesId]
2025-10-28 10:38:08.216 +01:00 [INF] Executing OkObjectResult, writing value of type 'UserManagement.Application.DTO.UserDto.UserLoginResponse'.
2025-10-28 10:38:08.258 +01:00 [INF] Executed action UserManagement.Presentation.Controllers.UserController.Login (UserManagement) in 7197.2932ms
2025-10-28 10:38:08.266 +01:00 [INF] Executed endpoint 'UserManagement.Presentation.Controllers.UserController.Login (UserManagement)'
2025-10-28 10:38:08.289 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7153/api/User/login - 200 null application/json; charset=utf-8 7781.8427ms
2025-10-28 10:46:10.140 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 10:46:10.985 +01:00 [INF] Now listening on: https://localhost:7153
2025-10-28 10:46:10.993 +01:00 [INF] Now listening on: http://localhost:5164
2025-10-28 10:46:11.355 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 10:46:11.362 +01:00 [INF] Hosting environment: Development
2025-10-28 10:46:11.368 +01:00 [INF] Content root path: C:\Users\HP\Desktop\CMS1\CMS1
2025-10-28 10:46:57.844 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7153/api/User/signup - application/json 66
2025-10-28 10:46:57.942 +01:00 [INF] CORS policy execution successful.
2025-10-28 10:46:57.951 +01:00 [INF]  ExceptionMiddleware executing for: /api/User/signup
2025-10-28 10:46:58.161 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output, Boolean needReplace, Int32 decodedLength)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-28 10:46:58.247 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-10-28 10:46:58.265 +01:00 [INF] Executing endpoint 'UserManagement.Presentation.Controllers.UserController.RegisterUser (UserManagement)'
2025-10-28 10:46:58.337 +01:00 [INF] Route matched with {action = "RegisterUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] RegisterUser(UserManagement.Application.DTO.UserDto.CreateUserDto) on controller UserManagement.Presentation.Controllers.UserController (UserManagement).
2025-10-28 10:47:03.002 +01:00 [INF] Executed DbCommand (135ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-28 10:47:04.566 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [EmployeeId], [PasswordHash], [RoleName], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-10-28 10:47:04.655 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType16`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 10:47:04.709 +01:00 [INF] Executed action UserManagement.Presentation.Controllers.UserController.RegisterUser (UserManagement) in 6336.1477ms
2025-10-28 10:47:04.719 +01:00 [INF] Executed endpoint 'UserManagement.Presentation.Controllers.UserController.RegisterUser (UserManagement)'
2025-10-28 10:47:04.763 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7153/api/User/signup - 200 null application/json; charset=utf-8 6934.2228ms
2025-10-28 10:48:28.814 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7153/api/User/login - application/json 66
2025-10-28 10:48:28.831 +01:00 [INF] CORS policy execution successful.
2025-10-28 10:48:28.835 +01:00 [INF]  ExceptionMiddleware executing for: /api/User/login
2025-10-28 10:48:28.845 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output, Boolean needReplace, Int32 decodedLength)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-28 10:48:28.865 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-10-28 10:48:28.874 +01:00 [INF] Executing endpoint 'UserManagement.Presentation.Controllers.UserController.Login (UserManagement)'
2025-10-28 10:48:28.898 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserManagement.Application.DTO.UserRoleDto.UserLoginDto) on controller UserManagement.Presentation.Controllers.UserController (UserManagement).
2025-10-28 10:48:29.360 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[@__loginmodel_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[EmployeeId], [u].[PasswordHash], [u].[RoleName], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginmodel_Email_0
2025-10-28 10:48:31.049 +01:00 [INF] Executed DbCommand (66ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CreatedAt], [s].[DOB], [s].[DepartmentId], [s].[Email], [s].[Firstname], [s].[Gender], [s].[IsActive], [s].[JobTitleId], [s].[Lastname], [s].[Middlename], [s].[Phone], [s].[RoleId], [s].[UpdatedAt], [s].[UserId], [s].[Id0], [s].[CreatedAt0], [s].[Description], [s].[RoleName], [s].[UpdatedAt0], [s].[Id1], [s].[Id2], [s0].[PermissionsId], [s0].[RolesId], [s0].[Id], [s0].[CreatedAt], [s0].[Description], [s0].[ModuleName], [s0].[SubModuleName], [s0].[UpdatedAt], [s].[CreatedAt1], [s].[DepartmentId0], [s].[Description0], [s].[IsActive0], [s].[MaximumSalary], [s].[MinimumSalary], [s].[Name], [s].[RoleId0], [s].[UpdatedAt1], [s].[CreatedAt2], [s].[DeptName], [s].[UpdatedAt2]
FROM (
    SELECT TOP(1) [e].[Id], [e].[CreatedAt], [e].[DOB], [e].[DepartmentId], [e].[Email], [e].[Firstname], [e].[Gender], [e].[IsActive], [e].[JobTitleId], [e].[Lastname], [e].[Middlename], [e].[Phone], [e].[RoleId], [e].[UpdatedAt], [e].[UserId], [r].[Id] AS [Id0], [r].[CreatedAt] AS [CreatedAt0], [r].[Description], [r].[RoleName], [r].[UpdatedAt] AS [UpdatedAt0], [j].[Id] AS [Id1], [j].[CreatedAt] AS [CreatedAt1], [j].[DepartmentId] AS [DepartmentId0], [j].[Description] AS [Description0], [j].[IsActive] AS [IsActive0], [j].[MaximumSalary], [j].[MinimumSalary], [j].[Name], [j].[RoleId] AS [RoleId0], [j].[UpdatedAt] AS [UpdatedAt1], [d].[Id] AS [Id2], [d].[CreatedAt] AS [CreatedAt2], [d].[DeptName], [d].[UpdatedAt] AS [UpdatedAt2]
    FROM [Employees] AS [e]
    INNER JOIN [Roles] AS [r] ON [e].[RoleId] = [r].[Id]
    LEFT JOIN [JobTitles] AS [j] ON [e].[JobTitleId] = [j].[Id]
    INNER JOIN [Departments] AS [d] ON [e].[DepartmentId] = [d].[Id]
    WHERE [e].[UserId] = @__user_Id_0
) AS [s]
LEFT JOIN (
    SELECT [p].[PermissionsId], [p].[RolesId], [p0].[Id], [p0].[CreatedAt], [p0].[Description], [p0].[ModuleName], [p0].[SubModuleName], [p0].[UpdatedAt]
    FROM [PermissionRoles] AS [p]
    INNER JOIN [Permissions] AS [p0] ON [p].[PermissionsId] = [p0].[Id]
) AS [s0] ON [s].[Id0] = [s0].[RolesId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [s0].[PermissionsId], [s0].[RolesId]
2025-10-28 10:48:31.141 +01:00 [INF] Executing OkObjectResult, writing value of type 'UserManagement.Application.DTO.UserDto.UserLoginResponse'.
2025-10-28 10:48:31.166 +01:00 [INF] Executed action UserManagement.Presentation.Controllers.UserController.Login (UserManagement) in 2251.2178ms
2025-10-28 10:48:31.174 +01:00 [INF] Executed endpoint 'UserManagement.Presentation.Controllers.UserController.Login (UserManagement)'
2025-10-28 10:48:31.181 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7153/api/User/login - 200 null application/json; charset=utf-8 2367.2953ms
